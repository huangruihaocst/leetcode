# 877. Stone Game

## Solution

### 方法一

动态规划。

修改游戏规则为计分制，如果Alex拿则加分，Lee拿则减分。那么最终如果分数大于零则Alex赢，反之输。

设`dp[i, j]`表示剩余堆为`piles[i], piles[i + 1], ..., piles[j]`时的最大的分数。

**初始状态：**
那么如果`i = j`，说明只剩一堆石子了，一定是对方拿，那么此时开始游戏的话一定只能拿到`-piles[i]`分。

**状态转移方程：**
对于状态`i, j`，此时剩余`j - i + 1`块石子，如果是奇数就是对方拿，偶数就是自己拿。
如果是自己拿，有可能拿左边也可能拿右边，因此方程为`dp[i, j] = max(dp[i + 1, j] + piles[i], dp[i, j - 1] + piles[j])`。
如果是对方拿，他会希望分数尽可能低，那么方程为`dp[i, j] = min(dp[i + 1, j] - piles[i], dp[i, j - 1] - piles[j])`。

最后结果`dp[0, n - 1]`如果为正则Alex赢。

此外，`functools.lru_cache`可以记录若干个函数的返回值，某种程度上把深搜转化成动态规划。

### 方法二

对偶数堆石子黑白间隔染色，那么Alex一定有办法拿到全部的黑色堆或者白色堆。
而黑色堆之和和白色堆之和一定有一个更大（题目说了不会平局），因此一开始Alex选择和更大的拿第一个就能必胜。